<!DOCTYPE html>
<html lang="es">
<head>
    <title>To-Do List</title>
</head>
<body>
    <h1>To-Do List</h1>
    
    <!-- Formulario para agregar nuevo todo -->
    <form method="post">
        <input type="hidden" name="accion" value="agregar">
        <input type="text" name="texto" placeholder="Nuevo todo" required>
        <button type="submit">Agregar</button>
    </form>
    
    <!-- Mostrar mensaje si existe -->
    {% if mensaje %}
        <h2>{{ mensaje }}</h2>
    {% endif %}
    
    <!-- Lista de todos -->
    <h2>Todos:</h2>
    {% if todos %}
        {% for todo in todos %}
            <div>
                <span style="{% if todo.completado %}text-decoration: line-through;{% endif %}">
                    {{ todo.texto }}
                </span>
                
                {% if not todo.completado %}
                    <form method="post" style="display: inline;">
                        <input type="hidden" name="accion" value="completar">
                        <input type="hidden" name="todo_id" value="{{ todo.id }}">
                        <button type="submit">Completar</button>
                    </form>
                {% endif %}
                
                <form method="post" style="display: inline;">
                    <input type="hidden" name="accion" value="eliminar">
                    <input type="hidden" name="todo_id" value="{{ todo.id }}">
                    <button type="submit">Eliminar</button>
                </form>
            </div>
        {% endfor %}
        
        <!-- Botón para limpiar completados -->
        <form method="post">
            <input type="hidden" name="accion" value="limpiar">
            <button type="submit">Limpiar Completados</button>
        </form>
    {% else %}
        <p>No hay todos. ¡Agrega uno!</p>
    {% endif %}
</body>
</html>